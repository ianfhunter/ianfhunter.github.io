<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Aws Reactive Startups" /><meta name="author" content="ianfhunter" /><meta property="og:locale" content="en" /><meta name="description" content="Save money by turning machines off when they’re not being used" /><meta property="og:description" content="Save money by turning machines off when they’re not being used" /><link rel="canonical" href="https://ianhunter.ie/posts/aws-reactive-startups/" /><meta property="og:url" content="https://ianhunter.ie/posts/aws-reactive-startups/" /><meta property="og:site_name" content="Ian F.V.G. Hunter" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-12-09T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Aws Reactive Startups" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@ianfhunter" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ianfhunter"},"dateModified":"2018-12-09T00:00:00+00:00","datePublished":"2018-12-09T00:00:00+00:00","description":"Save money by turning machines off when they’re not being used","headline":"Aws Reactive Startups","mainEntityOfPage":{"@type":"WebPage","@id":"https://ianhunter.ie/posts/aws-reactive-startups/"},"url":"https://ianhunter.ie/posts/aws-reactive-startups/"}</script><title>Aws Reactive Startups | Ian F.V.G. Hunter</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Ian F.V.G. Hunter"><meta name="application-name" content="Ian F.V.G. Hunter"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/site/profile.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Ian F.V.G. Hunter</a></div><div class="site-subtitle font-italic">Boop.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/notes/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>NOTES</span> </a><li class="nav-item"> <a href="/external/" class="nav-link"> <i class="fa-fw fas fa-solid fa-link ml-xl-3 mr-xl-3 unloaded"></i> <span>EXTERNAL LINKS</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fas fa-solid fa-id-badge ml-xl-3 mr-xl-3 unloaded"></i> <span>CONTACT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/ianfhunter" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['ianfhunter','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Aws Reactive Startups</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Aws Reactive Startups</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1544313600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Dec 9, 2018 </em> </span><div class="d-flex justify-content-between"> <span> By <em> ianfhunter </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="595 words"> <em>3 min</em> read</span></div></div></div><div class="post-content"><h1 id="reactive-startup-for-jenkins-on-aws">Reactive Startup for Jenkins on AWS</h1><h2 id="motive"><span class="mr-2">Motive</span><a href="#motive" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>AWS machines are deceptively expensive. Included below are a list of general use machine prices on Amazon’s storefront. 50 cent for one hour doesn’t seem so bad - but what if you have it up 24/7 ? The costs accrue quickly and one server could set you back $416 with only a month’s use.</p><p><img data-src="/assets/img/notes/Price_Tiers.png" data-proofer-ignore></p><p>Imagine a large-scale business. It uses AWS machines throughout many places in the deployment to Live process - Service Testing, Integration Testing, Pre-Production, etc. Along with this we have several teams, each with their own requirements - may that be load testing, distributed deployment or something else. A business like such will require many machines with varying costs.</p><p>First in line to cut costs is to only allocate machines to those that really need them, and to use the sizes they need - You don’t need a heavy duty box to run some lightweight database tests. To further enhance cost reduction, you can also set up dynamic starting/stopping of your machines.</p><h2 id="operation"><span class="mr-2">Operation</span><a href="#operation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>A development server runs Jenkins and runs through a set of build and testing scripts every time a push to version control happens. This setup might be a simple single-machines setup, or it may involve several machines, with similar or different purposes.</p><p><img data-src="/assets/img/notes/Master_Slave_Setup.png" data-proofer-ignore></p><p>First, the main Jenkins process and the agent processes must be configured to restart on startup. This should ideally be done regardless of whether you continue with this method or not in order to recover your Jenkins instance faster after reboot. This will involve a fairly easy process with Windows through the built-in Task Scheduler or by adding some scripts within /etc/init.d/ on Gnu/Linux.</p><p><img data-src="/assets/img/notes/Task_Scheduler_Screenshot.png" data-proofer-ignore></p><p>You may need to configure other processes/services for startup depending on your setup. Now the servers are prepared for accidental shutdowns. Or purposeful ones, which is what the next step entails.</p><p>![[On-Off.png]]</p><p>We set up two Jenkins jobs: One to monitor for activity, another to monitor for inactivity. Every 20 minutes or so, we check if there are any jobs currently running with Jenkins, and if there are any jobs run in the last hour. If not, we shutdown the agent machines using the AWS Powershell Tools (a simple call like Stop-EC2Instance machine.domain.com ). After a while without any jobs running, the machine will shutdown Similarly the other job checks every 4 minutes for pending jobs, as any jobs triggered while no machines are available will stall until they can execute. Jobs are triggered on Jenkins. At the next check, machines are made available and the jobs can progress We check the jobs’ statuses through our Jenkin’s Remote Access API through a small Python script.</p><p><img data-src="/assets/img/notes/Zoomed_Out.png" data-proofer-ignore></p><h2 id="result"><span class="mr-2">Result</span><a href="#result" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Of course, starting machines before a job run will increase the runtime for that job, but this process only adds about 2 or so minutes to the process. After this initial slowdown, machines are active for the next hour or longer, assuming that the successive jobs will be temporarily located. There is a caveat to be careful of when using the AWS Tools - if you boot twice within the hour, it counts as two hours of usage. This is why 1 hour is the recommended back-off time. If we activated this for only non-peak times, we have reduced usage by 66%, essentially reducing a machine like the one mentioned in the intro paragraph from $416 to $138. I imagine this could be reduced to under the $100 mark, but depending on the setup and the amount of activity on your Jenkins this will be more varied month on month.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/1-technical/'>1 technical</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/writing/" class="post-tag no-text-decoration" >writing</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/writing/">writing</a> <a class="post-tag" href="/tags/wip/">wip</a> <a class="post-tag" href="/tags/snippets/">snippets</a> <a class="post-tag" href="/tags/backstory/">backstory</a> <a class="post-tag" href="/tags/rpg/">rpg</a> <a class="post-tag" href="/tags/avrae/">avrae</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/catalogue/">catalogue</a> <a class="post-tag" href="/tags/coding/">coding</a> <a class="post-tag" href="/tags/daily-note/">daily_note</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ruling-powers-kachst/"><div class="card-body"> <em class="small" data-ts="1761868800" data-df="ll" > Oct 31, 2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Ruling Powers Kachst</h3><div class="text-muted small"><p> The dominant race of the Kachst people are pure blooded Orcs — Similar in stature and build to dwarves, and equally intelligent. Some subspecies exist within the land, but most are underdeveloped i...</p></div></div></a></div><div class="card"> <a href="/posts/the-value-of-unstructured-thought/"><div class="card-body"> <em class="small" data-ts="1761868800" data-df="ll" > Oct 31, 2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>The Value Of Unstructured Thought</h3><div class="text-muted small"><p> This article is a first draft and needs review + editing. This is not its final incarnation Bullet Journals I recently treated myself to a dotted notebook to use as a ‘Bullet Journal’. It was my...</p></div></div></a></div><div class="card"> <a href="/posts/cosmology/"><div class="card-body"> <em class="small" data-ts="1761868800" data-df="ll" > Oct 31, 2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Cosmology</h3><div class="text-muted small"><p> This is a WIP worldbuilding post. The cosmology of the Seven Suns universe is subject to change Land of the Seven Suns The world is surrounded by seven solar stars, each shining a different colo...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"><div class="btn btn-outline-primary disabled" prompt="Older"><p>-</p></div><a href="/posts/14-nov-23/" class="btn btn-outline-primary" prompt="Newer"><p>14 Nov 23</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/ianfhunter">ianfhunter</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/writing/">writing</a> <a class="post-tag" href="/tags/wip/">wip</a> <a class="post-tag" href="/tags/snippets/">snippets</a> <a class="post-tag" href="/tags/backstory/">backstory</a> <a class="post-tag" href="/tags/rpg/">rpg</a> <a class="post-tag" href="/tags/avrae/">avrae</a> <a class="post-tag" href="/tags/books/">books</a> <a class="post-tag" href="/tags/catalogue/">catalogue</a> <a class="post-tag" href="/tags/coding/">coding</a> <a class="post-tag" href="/tags/daily-note/">daily_note</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
